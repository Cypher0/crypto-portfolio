webpackJsonp([1],{NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("7+uW"),a={name:"Header",created:function(){this.signedIn()},methods:{setError:function(e,t){this.error=e.response&&e.response.data&&e.response.data.error||t},signedIn:function(){return localStorage.signedIn},signOut:function(){var e=this;this.$http.secured.delete("/signin").then(function(t){delete localStorage.csrf,delete localStorage.signedIn,e.$store.dispatch("logout"),e.$router.replace("/")}).catch(function(t){return e.setError(t,"Sign out failed")})}},computed:{isAuthenticated:function(){return this.$store.getters.isAuthenticated}}},s={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("header",{staticClass:"bg-blue mb-8 py-4"},[r("div",{staticClass:"container m-auto flex flex-wrap items-center justify-end"},[e._m(0),e._v(" "),r("div",[e.isAuthenticated?e._e():r("router-link",{staticClass:"px-2 no-underline",attrs:{to:"/"}},[e._v("Sign in")]),e._v(" "),e.isAuthenticated?e._e():r("router-link",{staticClass:"px-2 no-underline",attrs:{to:"/signup"}},[e._v("Sign Up")]),e._v(" "),e.isAuthenticated?r("router-link",{staticClass:"px-2 no-underline",attrs:{to:"/currencies"}},[e._v("My Currencies")]):e._e(),e._v(" "),e.isAuthenticated?r("a",{staticClass:"px-2 no-underline",attrs:{href:"/"},on:{click:function(t){return t.preventDefault(),e.signOut(t)}}},[e._v("Sign out")]):e._e()],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"flex-1 flex items-center"},[t("a",{staticClass:"uppercase font-bold no-underline",attrs:{href:"/"}},[this._v("Crypto Portfolio")])])}]},o={name:"App",components:{Header:r("VU/8")(a,s,!1,null,null,null).exports}},i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("Header"),this._v(" "),t("router-view")],1)},staticRenderFns:[]},c=r("VU/8")(o,i,!1,null,null,null).exports,u=r("/ocq"),l={name:"Signin",data:function(){return{name:"",password:"",error:""}},created:function(){this.checkSignedIn()},updated:function(){this.checkSignedIn()},methods:{signin:function(){var e=this;this.$http.plain.post("/signin",{name:this.name,password:this.password}).then(function(t){return e.signinSuccessful(t)}).catch(function(t){return e.signinFailed(t)})},signinSuccessful:function(e){var t=this;e.data.csrf?(localStorage.csrf=e.data.csrf,localStorage.signedIn=!0,this.error="",this.$store.dispatch("login",{name:this.name,password:this.password}).then(function(){t.$router.replace("/currencies")})):this.signinFailed(e)},signinFailed:function(e){this.error=e.response&&e.response.data&&e.response.data.error||"",delete localStorage.csrf,delete localStorage.signedIn},checkSignedIn:function(){localStorage.signedIn&&this.$router.replace("/currencies")}}},d={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"max-w-sm m-auto"},[r("div",{staticClass:"border p-10 border-grey rounded"},[r("h3",{staticClass:"text-2xl mb-6 text-black"},[e._v("Sign In")]),e._v(" "),r("form",{on:{submit:function(t){return t.preventDefault(),e.signin(t)}}},[e.error?r("div",{staticClass:"text-red"},[e._v(e._s(e.error))]):e._e(),e._v(" "),r("div",{staticClass:"mb-6"},[r("label",{attrs:{for:"name"}},[e._v("Name")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"bg-white focus:outline-none focus:shadow-outline border\n               border-gray-300 rounded-lg py-2 px-4 block w-full appearance-none\n               leading-normal",attrs:{type:"text",id:"name"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"mb-6"},[r("label",{attrs:{for:"password"}},[e._v("Password")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"bg-white focus:outline-none focus:shadow-outline border\n               border-gray-300 rounded-lg py-2 px-4 block w-full appearance-none\n               leading-normal",attrs:{type:"password",id:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),r("button",{staticClass:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4\n              border border-blue-700 rounded",attrs:{type:"submit"}},[e._v("\n        Sign In\n      ")]),e._v(" "),r("div",{staticClass:"my-4"},[r("router-link",{staticClass:"bg-transparent text-blue-700 font-semibold py-2 px-4",attrs:{to:"/signup"}},[e._v("\n          Sign Up\n        ")])],1)])])])},staticRenderFns:[]},p=r("VU/8")(l,d,!1,null,null,null).exports,m={name:"Signup",data:function(){return{name:"",password:"",password_confirmation:"",error:""}},created:function(){this.checkSignedIn()},updated:function(){this.checkSignedIn()},methods:{signup:function(){var e=this;this.$http.plain.post("/signup",{name:this.name,password:this.password,password_confirmation:this.password_confirmation}).then(function(t){return e.signupSuccessful(t)}).catch(function(t){return e.signupFailed(t)})},signupSuccessful:function(e){var t=this;e.data.csrf?(localStorage.csrf=e.data.csrf,localStorage.signedIn=!0,this.error="",this.$store.dispatch("login",{name:this.name,password:this.password}).then(function(){t.$router.replace("/currencies")})):this.signupFailed(e)},signupFailed:function(e){this.error=e.response&&e.response.data&&e.response.data.error||"Something went wrong",delete localStorage.csrf,delete localStorage.signedIn},checkSignedIn:function(){localStorage.signedIn&&this.$router.replace("/currencies")}}},v={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"max-w-sm m-auto"},[r("div",{staticClass:"border p-10 border-grey rounded"},[r("h3",{staticClass:"text-2xl mb-6 text-black"},[e._v("Create Account")]),e._v(" "),r("form",{on:{submit:function(t){return t.preventDefault(),e.signup(t)}}},[e.error?r("div",{staticClass:"text-red"},[e._v(e._s(e.error))]):e._e(),e._v(" "),r("div",{staticClass:"mb-6"},[r("label",{attrs:{for:"name"}},[e._v("Name")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"bg-white focus:outline-none focus:shadow-outline border\n               border-gray-300 rounded-lg py-2 px-4 block w-full appearance-none\n               leading-normal",attrs:{type:"text",id:"name"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"mb-6"},[r("label",{attrs:{for:"password"}},[e._v("Password")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"bg-white focus:outline-none focus:shadow-outline border\n               border-gray-300 rounded-lg py-2 px-4 block w-full appearance-none\n               leading-normal",attrs:{type:"password",id:"password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"mb-6"},[r("label",{attrs:{for:"password"}},[e._v("Confirm Password")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.password_confirmation,expression:"password_confirmation"}],staticClass:"bg-white focus:outline-none focus:shadow-outline border\n               border-gray-300 rounded-lg py-2 px-4 block w-full appearance-none\n               leading-normal",attrs:{type:"password",id:"password_confirmation"},domProps:{value:e.password_confirmation},on:{input:function(t){t.target.composing||(e.password_confirmation=t.target.value)}}})]),e._v(" "),r("button",{staticClass:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4\n              border border-blue-700 rounded",attrs:{type:"submit"}},[e._v("\n        Create Account\n      ")]),e._v(" "),r("div",{staticClass:"my-4"},[r("router-link",{staticClass:"bg-transparent text-blue-700 font-semibold py-2 px-4",attrs:{to:"/"}},[e._v("\n          Sign In\n        ")])],1)])])])},staticRenderFns:[]},h=r("VU/8")(m,v,!1,null,null,null).exports,f={name:"Currencies",data:function(){return{currencies:[],newCurrency:{name:"Select Currency Type",amount:1,purchased_at:(new Date).toISOString().slice(0,10)},error:"",options:["Bitcoin","Ethereum","Ripple"]}},created:function(){var e=this;localStorage.signedIn?this.$http.secured.get("/currencies").then(function(t){e.currencies=t.data}).catch(function(t){return e.setError(t,"Something went wrong")}):this.$router.replace("/")},methods:{setError:function(e,t){this.error=e.response&&e.response.data&&e.response.data.error||t},addCurrency:function(){var e=this;this.newCurrency&&this.$http.secured.post("/currencies",{currency:{name:this.newCurrency.name,amount:this.newCurrency.amount,purchased_at:this.newCurrency.purchased_at,wallet:this.newCurrency.wallet}}).then(function(t){e.currencies.push(t.data),e.newCurrency={name:"Select Currency Type",amount:1,purchased_at:(new Date).toISOString().slice(0,10)}}).catch(function(t){return e.setError(t,"Couldn't add currency")})},deleteCurrency:function(e){var t=this;confirm("Are you sure?")&&this.$http.secured.delete("/currencies/"+e.id).then(function(r){t.currencies.splice(t.currencies.indexOf(e),1)}).catch(function(e){return t.setError(e,"Couldn't delete currency")})}}},g={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"m-auto py-6"},[e.error?r("div",{staticClass:"text-red m-auto"},[e._v(e._s(e.error))]):e._e(),e._v(" "),r("h3",{staticClass:"text-3xl mb-6",attrs:{align:"center"}},[e._v("Add a new Currency")]),e._v(" "),r("form",{attrs:{action:""},on:{submit:function(t){return t.preventDefault(),e.addCurrency(t)}}},[r("div",{staticClass:"mb-6 m-auto max-w-md"},[r("label",{staticClass:"block font-bold mb-2",attrs:{for:"currency_name"}},[e._v("Type")]),e._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:e.newCurrency.name,expression:"newCurrency.name"}],staticClass:"block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 mb-4 rounded shadow leading-tight\n      focus:outline-none focus:shadow-outline",on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(e.newCurrency,"name",t.target.multiple?r:r[0])}}},[r("option",{attrs:{disabled:""}},[e._v("Select Currency Type")]),e._v(" "),e._l(e.options,function(t){return r("option",{key:t.id,domProps:{value:t}},[e._v(e._s(t))])})],2),e._v(" "),r("label",{staticClass:"block font-bold mb-2",attrs:{for:"currency_amount"}},[e._v("Amount")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.newCurrency.amount,expression:"newCurrency.amount"}],staticClass:"block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 mb-4 rounded shadow leading-tight\n             focus:outline-none focus:shadow-outline",attrs:{type:"number"},domProps:{value:e.newCurrency.amount},on:{input:function(t){t.target.composing||e.$set(e.newCurrency,"amount",t.target.value)}}}),e._v(" "),r("label",{staticClass:"block font-bold mb-2",attrs:{for:"currency_purchased_at"}},[e._v("Date of purchase")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.newCurrency.purchased_at,expression:"newCurrency.purchased_at"}],staticClass:"block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 mb-4 rounded shadow leading-tight\n             focus:outline-none focus:shadow-outline",attrs:{type:"date"},domProps:{value:e.newCurrency.purchased_at},on:{input:function(t){t.target.composing||e.$set(e.newCurrency,"purchased_at",t.target.value)}}}),e._v(" "),r("label",{staticClass:"block font-bold mb-2",attrs:{for:"currency_wallet"}},[e._v("Wallet")]),e._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.newCurrency.wallet,expression:"newCurrency.wallet"}],staticClass:"block appearance-none w-full bg-white border border-gray-400 hover:border-gray-500 px-4 py-2 pr-8 mb-4 rounded shadow leading-tight\n             focus:outline-none focus:shadow-outline",attrs:{type:"text",placeholder:"Enter Wallet Location"},domProps:{value:e.newCurrency.wallet},on:{input:function(t){t.target.composing||e.$set(e.newCurrency,"wallet",t.target.value)}}}),e._v(" "),r("input",{staticClass:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 border border-blue-700 rounded",attrs:{type:"submit",value:"Add Currency"}})])]),e._v(" "),r("h3",{staticClass:"text-3xl mb-6",attrs:{align:"center"}},[e._v("My Cryptocurrencies")]),e._v(" "),r("table",{staticClass:"table-auto m-auto"},[e._m(0),e._v(" "),r("tbody",e._l(e.currencies,function(t){return r("tr",{key:t.id},[r("td",{staticClass:"border px-4 py-2"},[e._v(e._s(t.name))]),e._v(" "),r("td",{staticClass:"border px-4 py-2"},[e._v(e._s(t.amount))]),e._v(" "),r("td",{staticClass:"border px-4 py-2"},[e._v(e._s(t.purchased_at))]),e._v(" "),r("td",{staticClass:"border px-4 py-2"},[e._v(e._s(t.wallet))]),e._v(" "),r("td",{staticClass:"border px-4 py-2"},[e._v(e._s(t.market_value))]),e._v(" "),r("td",{staticClass:"border px-4 py-2"},[r("button",{staticClass:"bg-transparent hover:bg-red-500 text-red-700 font-bold\n                  hover:text-white py-2 px-4 border border-red-500\n                  hover:border-transparent rounded",on:{click:function(r){return r.preventDefault(),e.deleteCurrency(t)}}},[e._v("\n            Delete\n          ")])])])}),0)])])},staticRenderFns:[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",[r("tr",[r("th",{staticClass:"border px-4 py-2"},[e._v("Cryptocurrency")]),e._v(" "),r("th",{staticClass:"border px-4 py-2"},[e._v("Amount")]),e._v(" "),r("th",{staticClass:"border px-4 py-2"},[e._v("Date of purchase")]),e._v(" "),r("th",{staticClass:"border px-4 py-2"},[e._v("Wallet location")]),e._v(" "),r("th",{staticClass:"border px-4 py-2"},[e._v("Current market value (EUR)")]),e._v(" "),r("th",{staticClass:"border px-4 py-2"},[e._v("Option")])])])}]},b=r("VU/8")(f,g,!1,null,null,null).exports;n.a.use(u.a);var _,w=new u.a({mode:"history",routes:[{path:"/",name:"Signin",component:p},{path:"/signup",name:"Signup",component:h},{path:"/currencies",name:"Currencies",component:b}]}),y=r("//Fk"),C=r.n(y),x=r("bOdI"),S=r.n(x),k=r("NYxO");n.a.use(k.a);var I=new k.a.Store({state:{isAuthenticated:!!localStorage.getItem("token")},mutations:(_={},S()(_,"LOGIN_SUCCESS",function(e){e.isAuthenticated=!0,e.pending=!1}),S()(_,"LOGOUT",function(e){e.isAuthenticated=!1}),_),actions:{login:function(e,t){var r=e.commit;return new C.a(function(e){setTimeout(function(){localStorage.setItem("token","jwt"),r("LOGIN_SUCCESS"),e()},1e3)})},logout:function(e){var t=e.commit;localStorage.removeItem("token"),t("LOGOUT")}},getters:{isAuthenticated:function(e){return e.isAuthenticated}}}),$=r("Rf8U"),A=r.n($),E=r("Dd8w"),N=r.n(E),O=r("mtWM"),U=r.n(O),F="https://mysterious-fortress-90505.herokuapp.com",P=U.a.create({baseURL:F,withCredentials:!0,headers:{"Content-Type":"application/json"}}),T=U.a.create({baseURL:F,withCredentials:!0,headers:{"Content-Type":"application/json"}});P.interceptors.request.use(function(e){var t=e.method.toUpperCase();return"OPTIONS"!==t&&"GET"!==t&&(e.headers=N()({},e.header,{"X-CSRF-TOKEN":localStorage.csrf})),e}),P.interceptors.response.use(null,function(e){return e.response&&e.response.config&&401===e.response.status?T.post("/refresh",{},{headers:{"X-CSRF-TOKEN":localStorage.csrf}}).then(function(t){localStorage.csrf=t.data.csrf,localStorage.signedIn=!0;var r=e.response.config;return r.headers["X-CSRF-TOKEN"]=localStorage.csrf,T.request(r)}).catch(function(e){return delete localStorage.csrf,delete localStorage.signedIn,location.replace("/"),C.a.reject(e)}):C.a.reject(e)});r("Q00M");n.a.config.productionTip=!1,n.a.use(A.a,{secured:P,plain:T}),new n.a({el:"#app",router:w,store:I,securedAxiosInstance:P,plainAxiosInstance:T,components:{App:c},template:"<App/>"})},Q00M:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.8a1416feecc72db92719.js.map